<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="reserves">
 
  	<select id="insert" resultType="int" parameterType="mybatis.vo.Reserve">
 		INSERT INTO TBL_RESERVE
  		VALUES(reserve_idx_seq.nextval, #{member_code}, #{theater}, #{movie_code}, sysdate ,#{schedule}, #{seat})
 	</select>
 	<select id="delete" resultType="int" parameterType="java.util.Map">
 		DELETE FROM TBL_RESERVE
		WHERE RCODE=#{rcode} AND MEMBER_CODE= #{member_code} 
 	</select>
 	<select id="searchId" resultType="mybatis.vo.Reserve" parameterType="String">
 		SELECT RCODE, MEMBER_CODE, THEATER, MOVIE_CODE, RESERVE_DATE, SCHEDULE, SEAT
		FROM TBL_RESERVE
		WHERE MEMBER_CODE = #{member_code}
 	</select>
 	<select id="select" parameterType="String" resultType="Object">
 		SELECT TR.MEMBER_CODE,TM.MNAME , TR.SCHEDULE , TR.RESERVE_DATE, TM.RATING, TR.THEATER,TR.RCODE 
		FROM TBL_MOVIE tm , TBL_RESERVE tr 
		WHERE TM.MCODE = TR.MOVIE_CODE
		AND TR.MEMBER_CODE = #{member_code}
		AND tr.MOVIE_CODE =#{movie_code}
 	</select>
 
 </mapper>
 
 
 
 
 
 